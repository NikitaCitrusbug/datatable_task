

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/style.css">
    <!-- <link  href="https://cdn.rawgit.com/fengyuanchen/cropper/v2.0.1/dist/cropper.min.css" rel="stylesheet"> -->
<!-- <script src="https://cdn.rawgit.com/fengyuanchen/cropper/v2.0.1/dist/cropper.min.js"></script> -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropper/4.1.0/cropper.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropper/4.1.0/cropper.min.css">
    
    <!-- <link rel="stylesheet" href="css/cropper.css"> -->
    <title>Image Cropper</title>
</head>
<body>
    <div class="container">
        <div class="image-container">
            <div class="image-workspace">
                <img id="img_select" src="" alt="">
                <span>Image Work Space</span>
            </div>
        </div>
        <div class="preview-container">
            <div class="preview-cover">
                <div class="img-preview" style="width: 10px; height: 20px;">
                    <!-- <img id = "img_preview" src="" alt="" srcset=""> -->
                </div>
                <span>Image Preview</span>
            </div>

        </div>
        <div class="action-button">
            <!-- <button class="upload">Upload</button> -->
            <input type="file" id="myFileInput" accept="image/*">
            <button class="download">Download</button>
        </div>
        <div class="bottom-control">
            <div class="ctrl-cropper">
                <span>Control Cropper</span>
                <li><svg xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path d="M5 13V11H19V13ZM3 17V15H17V17ZM7 9V7H21V9Z"/></svg></li>
                <li><svg xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path d="M17 15V7Q17 7 17 7Q17 7 17 7H9V5H17Q17.825 5 18.413 5.588Q19 6.175 19 7V15ZM17 23V19H7Q6.175 19 5.588 18.413Q5 17.825 5 17V7H1V5H5V1H7V17Q7 17 7 17Q7 17 7 17H23V19H19V23Z"/></svg></li>
                
            </div>
            <div class="lock">
                <span>Lock Cropper</span>
                <li><svg xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path d="M12 1Q14.075 1 15.538 2.462Q17 3.925 17 6V8H18Q18.825 8 19.413 8.587Q20 9.175 20 10V20Q20 20.825 19.413 21.413Q18.825 22 18 22H6Q5.175 22 4.588 21.413Q4 20.825 4 20V10Q4 9.175 4.588 8.587Q5.175 8 6 8H7V6Q7 3.925 8.463 2.462Q9.925 1 12 1ZM12 3Q10.75 3 9.875 3.875Q9 4.75 9 6V8H15V6Q15 4.75 14.125 3.875Q13.25 3 12 3ZM6 20H18Q18 20 18 20Q18 20 18 20V10Q18 10 18 10Q18 10 18 10H6Q6 10 6 10Q6 10 6 10V20Q6 20 6 20Q6 20 6 20ZM12 13Q11.175 13 10.588 13.587Q10 14.175 10 15Q10 15.825 10.588 16.413Q11.175 17 12 17Q12.825 17 13.413 16.413Q14 15.825 14 15Q14 14.175 13.413 13.587Q12.825 13 12 13ZM6 10Q6 10 6 10Q6 10 6 10V20Q6 20 6 20Q6 20 6 20Q6 20 6 20Q6 20 6 20V10Q6 10 6 10Q6 10 6 10Z"/></svg></li>
                <li><svg xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path d="M7 6Q7 3.925 8.463 2.462Q9.925 1 12 1Q14.075 1 15.538 2.462Q17 3.925 17 6V8H18Q18.825 8 19.413 8.587Q20 9.175 20 10V20Q20 20.825 19.413 21.413Q18.825 22 18 22H6Q5.175 22 4.588 21.413Q4 20.825 4 20V10Q4 9.175 4.588 8.587Q5.175 8 6 8H15V6Q15 4.75 14.125 3.875Q13.25 3 12 3Q10.75 3 9.875 3.875Q9 4.75 9 6ZM6 20H18Q18 20 18 20Q18 20 18 20V10Q18 10 18 10Q18 10 18 10H6Q6 10 6 10Q6 10 6 10V20Q6 20 6 20Q6 20 6 20ZM12 13Q11.175 13 10.588 13.587Q10 14.175 10 15Q10 15.825 10.588 16.413Q11.175 17 12 17Q12.825 17 13.413 16.413Q14 15.825 14 15Q14 14.175 13.413 13.587Q12.825 13 12 13ZM6 10Q6 10 6 10Q6 10 6 10V20Q6 20 6 20Q6 20 6 20Q6 20 6 20Q6 20 6 20V10Q6 10 6 10Q6 10 6 10Z"/></svg></li>
                
            </div>
            <div class="drag-mode">
                <span>Drag Mode</span>
                <li><svg xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path d="M17 15V7Q17 7 17 7Q17 7 17 7H9V5H17Q17.825 5 18.413 5.588Q19 6.175 19 7V15ZM17 23V19H7Q6.175 19 5.588 18.413Q5 17.825 5 17V7H1V5H5V1H7V17Q7 17 7 17Q7 17 7 17H23V19H19V23Z"/></svg></li>
                <li><svg xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path d="M8.1 9.5 5 6.4V9H3V3H9V5H6.4L9.5 8.1ZM15.9 9.5 14.5 8.1 17.6 5H15V3H21V9H19V6.4ZM15 21V19H17.6L14.5 15.9L15.9 14.5L19 17.6V15H21V21ZM3 21V15H5V17.6L8.1 14.5L9.5 15.9L6.4 19H9V21Z"/></svg></li>
                
            </div>
            <!-- <div class="ctrl-cropper">
                <span>Crop control</span>
                <li><img src="images/crop-tool-svgrepo-com.svg" style="height: 20px;"/></li>
            </div>
            <div class="drag-control">
                <span>Drag control</span>
                <li><img src="images/42205_arrow_cursor_drag_icon.png" alt="" style="height: 20px;"></li>
            </div> -->
            
        </div>

    </div>



<script src="js/script.js"></script> 
<script src="https://cdnjs.cloudflare.com/ajax/libs/cropper/4.1.0/cropper.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/cropper/4.1.0/cropper.js"></script>
<!-- <script src="js/cropper.js"></script> -->
<script>
    var image_workspace = document.querySelectorAll('.image-workspace img')
    var image_workspaceSpan = document.querySelector('.image-workspace span')
    var preview_containerSpan = document.querySelector('.preview-container span')
    document.querySelector("#myFileInput").addEventListener("change" , function(){
        // console.log(this.files)
        const reader = new FileReader();
        reader.addEventListener("load" ,  () => {
            localStorage.setItem("recent-img" , reader.result)
            
        })   
        reader.readAsDataURL(this.files[0]);
    })


    document.addEventListener("change" , () => {
        const recentImageDataUrl = localStorage.getItem("recent-img")
        if (recentImageDataUrl) {
            document.querySelector("#img_select").setAttribute("src" , recentImageDataUrl)
            // document.querySelector("#img_preview").setAttribute("src" , recentImageDataUrl)
            image_workspaceSpan.style.display = 'none'
            preview_containerSpan.style.display = 'none'

            var options = {
        dragMode: 'move',
        preview: '.img-preview',
        viewMode: 2,
        modal: false,
        background: false,
        ready: function(){

            // cropper control
            controlCropper[0].onclick = () => cropper.clear()
            controlCropper[1].onclick = () => cropper.crop()

            // lock cropper
            lockCropper[0].onclick = () => cropper.disable()
            lockCropper[1].onclick = () => cropper.enable()

            // drag mode
            dargMode[0].onclick = () => cropper.setDragMode("crop")
            dargMode[1].onclick = () => cropper.setDragMode("move")

            actionButton[1].onclick = () => {
                actionButton[1].innerText = '...'
                cropper.getCroppedCanvas().toBlob((blob) => {
                    var downloadUrl = window.URL.createObjectURL(blob)
                    var a = document.createElement('a')
                    a.href = downloadUrl
                    a.download = 'cropped-image.jpg' // output image name
                    a.click()
                    actionButton[1].innerText = 'Download'
                })
            }
        }
        
    }
    var cropper = new Cropper(image_workspace, options)
    }
    })
</script>
</body>
</html> 